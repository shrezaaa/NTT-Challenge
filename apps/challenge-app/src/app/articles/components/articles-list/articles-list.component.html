<div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3 p-6">
  @if (articles$ | async; as data) {
    @for (article of data.articles; track article.slug) {
      <mat-card
        class="rounded-2xl shadow-md hover:shadow-xl transition duration-200 flex flex-col"
      >
        <mat-card-header>
          <div mat-card-avatar>
            <img
              [src]="article.author.image"
              [alt]="article.author.username"
              class="w-10 h-10 rounded-full"
            />
          </div>
          <mat-card-title>{{ article.title }}</mat-card-title>
          <mat-card-subtitle>
            By {{ article.author.username }} Â·
            {{ article.createdAt | date: 'mediumDate' }}
          </mat-card-subtitle>
        </mat-card-header>

        <mat-card-content class="flex-1">
          <p class="text-gray-700 line-clamp-3">
            {{ article.description }}
          </p>

          <div class="mt-4 flex flex-wrap gap-2">
            @for (tag of article.tagList; track tag) {
              <span class="bg-gray-100 text-sm px-2 py-1 rounded-full">
                #{{ tag }}
              </span>
            }
          </div>
        </mat-card-content>

        <mat-card-actions class="ms-1 mt-auto flex justify-between items-center">
          <a mat-stroked-button color="primary" [routerLink]="'./' + article.slug">
            Read More
          </a>
          <button mat-icon-button color="warn" class="flex items-center">
            <mat-icon>favorite</mat-icon>
            <span class="ml-1 text-sm">{{ article.favoritesCount }}</span>
          </button>
        </mat-card-actions>
      </mat-card>
    }
  } @else {
    <div class="col-span-full flex justify-center items-center p-10">
      <mat-spinner diameter="40"></mat-spinner>
      <span class="ml-4 text-gray-600">Loading articles...</span>
    </div>
  }
</div>
